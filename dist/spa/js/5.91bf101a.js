(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{3802:function(e,t,a){},"713b":function(e,t,a){"use strict";a.r(t);var o,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},[a("q-header",{staticClass:"bg-white text-grey-10",attrs:{bordered:""}},[a("q-toolbar",{staticClass:"constrain"},[a("q-item",{attrs:{offset:e.fabPos,disable:e.draggingFab}},[a("q-fab",{attrs:{icon:"menu",direction:"down","text-color":"black",flat:"",padding:"xs",color:"black"}},[a("div",[a("q-btn",{style:e.menuButtonColor,attrs:{to:"/weather/forecast",icon:"eva-sun",round:"",size:e.iconSize,dense:"",flat:"",color:"black"}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:this.$auth.check()&&1===this.$auth.user().role,expression:"this.$auth.check() && this.$auth.user().role === 1"}],staticClass:"q-mr-sm",style:e.menuButtonColor,attrs:{to:"/settings",icon:"settings",round:"","text-color":"black",size:"15px",dense:"",flat:""}}),a("q-separator",{staticClass:"large-screen-only",attrs:{vertical:"",spaced:""}})],1)])],1),a("q-separator",{staticClass:"large-screen-only",attrs:{vertical:"",spaced:"1px"}}),a("q-space",{staticClass:"large-screen-only"}),a("q-toolbar-title",{staticClass:"text-grand-hotel text-capitalise text-bold content-center",on:{click:e.goHome}},[e._v("\n          DejaVu\n        ")]),a("q-space",{staticClass:"large-screen-only"}),this.$auth.check()?a("q-item",{attrs:{icon:"menu",direction:"left","text-color":"black",flat:"",padding:"xs"}},[a("q-btn",{attrs:{"external-label":"","label-position":"left",to:"/camera",icon:"eva-camera-outline","text-color":"black",size:e.iconSize,rounded:"",dense:"",color:"amber-1",label:"",padding:"xs",flat:""}}),a("q-btn",{attrs:{"external-label":"","label-position":"left",to:"/account/home",icon:"person","text-color":"black",size:e.iconSize,rounded:"",dense:"",color:"amber-1",label:"",padding:"xs",flat:""}}),a("q-btn",{attrs:{"external-label":"","label-position":"left",to:"/logout",icon:"logout",round:"","text-color":"black",size:e.iconSize,dense:"",color:"amber-1",label:"",padding:"xs",flat:""}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:this.$auth.check()&&1===this.$auth.user().role,expression:"this.$auth.check() && this.$auth.user().role === 1"}],attrs:{"external-label":"","label-position":"left",to:"/settings",icon:"settings",round:"","text-color":"black",size:e.iconSize,dense:"",color:"amber-1",label:"",padding:"xs",flat:""}})],1):a("q-item",[a("q-item-section",[a("q-btn",{attrs:{to:"/login",icon:"login",round:"","text-color":"black",size:e.iconSize,dense:""}})],1)],1)],1)],1),a("q-footer",{staticClass:"bg-white ",attrs:{bordered:""}},[a("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e.showAppInstallBanner?a("div",{staticClass:"banner-container bg-primary"},[a("div",{staticClass:"constrain"},[a("q-banner",{staticClass:"bg-primary text-white",attrs:{"inline-actions":"",dense:""},scopedSlots:e._u([{key:"avatar",fn:function(){return[a("q-avatar",{attrs:{color:"white",icon:"eva-camera-outline","text-color":"grey-10","font-size":"22ps"}})]},proxy:!0},{key:"action",fn:function(){return[a("q-btn",{staticClass:"q-px-sm",attrs:{dense:"",flat:"",label:"YES"},on:{click:e.installApp}}),a("q-btn",{staticClass:"q-px-sm",attrs:{dense:"",flat:"",label:"LATER"},on:{click:function(t){e.showAppInstallBanner=!1}}}),a("q-btn",{staticClass:"q-px-sm",attrs:{dense:"",flat:"",label:"NEVER"},on:{click:e.neverShowAppInstall}})]},proxy:!0}],null,!1,2354785289)},[a("b",[e._v(" Install DejaVu? ")])])],1)]):e._e()]),a("q-tabs",{staticClass:"text-grey-10 small-screen-only",attrs:{"active-color":"primary","indicator-color":"transparent"}},[a("q-route-tab",{attrs:{to:"/",icon:"eva-home-outline"}}),a("q-space"),a("q-route-tab",{attrs:{to:"/camera",icon:"eva-camera-outline"}})],1),[a("footer",[a("cookie-law",{staticClass:"bg-teal-9",staticStyle:{color:"wheat"},attrs:{theme:"dark-lime",transitionName:"fade",buttonDecline:!0,buttonDeclineClass:"bg-blue  text-white",buttonDeclineText:"Decline",storageType:"localStorage",storageName:"cookie:accepted",buttonClass:"Cookie__button",buttonLinkNewTab:!0,buttonLinkText:"Private Policy",buttonText:"Got it !",buttonLink:"/#/privacy",message:"🍪 DejaVu uses cookies to ensure you get the best experience on our website. "},on:{accept:e.CookieSettingsPopup,decline:e.declineSettings,close:e.CookieSettingsPopup}},[a("div",{staticClass:"q-banner--top-padding q-px-lg ",attrs:{slot:"message"},slot:"message"},[e._v("\n              🍪 DejaVu uses cookies to ensure you get the best experience on our website.\n              "),a("p")])])],1)]],2),a("q-page-container",{staticClass:"bg-grey-1"},[a("router-view")],1)],1)},s=[],i=(a("99af"),a("b0c0"),a("d3b7"),a("25f0"),a("ded3")),c=a.n(i),r=a("bc3a"),l=a.n(r),u=a("5638"),p=a("d2d0"),h=a.n(p),d=a("2b0e"),f=a("2b27"),b=a.n(f);window.Pusher=a("782e"),d["default"].use(b.a);var v={name:"MainLayout",components:{CookieLaw:h.a},data:function(){return{loggedInUser:"atem",showAppInstallBanner:!1,fabPos:[18,18],draggingFab:!1,query:"",iconSize:"13px",menuButtonColor:"background: antiquewhite",cookieBanner:!0,cookieSettings:!1,decline:!0}},mounted:function(){var e=this,t=this.$q.localStorage.getItem("neverShowAppInstall");t||window.addEventListener("beforeinstallprompt",(function(t){t.preventDefault(),o=t,setTimeout((function(){}),3e3),e.showAppInstallBanner=!0}))},methods:{showBanner:function(){this.cookieBanner=!1},CookieSettingsPopup:function(){console.log("SHOW STICKY COOKIE SETTINGS"),this.cookieSettings=!0},declineSettings:function(){localStorage.removeItem("cookie:accepted")},installApp:function(){var e=this;this.showAppInstallBanner=!1,o.prompt(),o.userChoice.then((function(t){"accepted"===t.outcome?(console.log("User accepted the install prompt"),e.neverShowAppInstall()):console.log("User dismissed the install prompt")}))},neverShowAppInstall:function(){this.showAppInstallBanner=!1,this.$q.localStorage.set("neverShowAppInstall",!0)},moveFab:function(e){this.draggingFab=!0!==e.isFirst&&!0!==e.isFinal,this.fabPos=[this.fabPos[0]-e.delta.x,this.fabPos[1]-e.delta.y]},getForecast:function(){var e=this,t=""===this.query?"Dusseldorf":this.query,a="https://atemkeng.com/api/weather/forecast/"+t;l.a.get(a).then((function(a){var o=a.data.current.temp;if(console.log(a),o>=13){var n="The temperature in ".concat(t," now is ").concat(o," °C");e.showNotif(n,"positive")}})).catch((function(a){var o="Please enter a valid City not ".concat(t);e.showNotif(o,"red"),console.log("Wrong City :  ".concat(t)),console.log("Error:  ".concat(a))})),this.query=""},showNotif:function(e,t){this.$q.notify({message:e,color:t,progress:!0,position:"top",count:1,avatar:"https://firebasestorage.googleapis.com/v0/b/deja-vue-e67a1.appspot.com/o/avat_atem.png?alt=media&token=5827b153-5462-4301-81be-ade0777202d4",actions:[{label:"Dismis",color:"white",handler:function(){}}]})},liveForecast:function(e){JSON.stringify(e);var t=e.forecast.timezone,a=e.forecast.actual.temp,o="The forecast for  ".concat(t," is ").concat(a," °C");this.showNotif(o,"positive")},liveWeather:function(e){JSON.stringify(e);var t=e.weather.name,a=e.weather.main.temp,o="The current Temperature in ".concat(t," is ").concat(a,"°C");this.showNotif(o,"teal")},livePeakForecast:function(e){JSON.stringify(e);var t=c()({},e.peak),a=t.temp,o=t.time,n=t.city;this.$store.commit("forecasts/setForecast",c()({},e.peak)),"Dusseldorf"===n&&this.$store.commit("forecasts/setDusseldorf",{peak:a});var s="The warmest time for : ".concat(o,"  in ").concat(n," with temperature :  ").concat(a," °C "),i=(new Date).toString();o===i.substr(0,24)&&(s="Today's peak temperature of ".concat(a,"°C in ").concat(n," has been reached")),this.showNotif(s,"teal")},liveDailyForecast:function(e){JSON.stringify(e);var t=c()({},e),a=t.temp,o=t.time,n=t.city;this.$store.commit("forecasts/setForecast",c()({},e)),"Dusseldorf"===n&&this.$store.commit("forecasts/setDusseldorf",{peak:a});var s="The warmest time for : ".concat(o,"  in ").concat(n," with temperature :  ").concat(a," °C "),i=(new Date).toString();o===i.substr(0,24)&&(s="Today's peak temperature of ".concat(a,"°C in ").concat(n," has been reached")),this.showNotif(s,"teal")},livePriceTracker:function(e){JSON.stringify(e);var t=c()({},e),a=t.article,o=t.details,n="The current Price of ".concat(a," is ").concat(o.price,",\n          specs:  ").concat(o.spec,", color: ").concat(o.color,", condition: ").concat(o.condition);this.showNotif(n,"teal")},pushEcho:function(){window.Echo=new u["a"]({broadcaster:"pusher",key:"local",cluster:"local",forceTLS:!1,wsHost:window.location.hostname,wsPort:6001,disableStats:!0});var e=this,t=window.Echo.channel("weather-channel");t.listen(".App\\Events\\WeatherFetchEvent",(function(t){e.liveWeather(t)}));var a=window.Echo.channel("forecast-channel");a.listen(".App\\Events\\ForecastUpdatedEvent",(function(t){e.liveForecast(t)}));var o=window.Echo.channel("dailyForecast-channel");o.listen(".App\\Events\\DailyForecastEvent",(function(t){e.liveDailyForecast(t)}));var n=window.Echo.channel("peak-channel");n.listen(".App\\Events\\PeakTemperatureEvent",(function(t){e.livePeakForecast(t)}));var s=window.Echo.channel("price-channel");s.listen(".App\\Events\\PriceCheckEvent",(function(t){e.livePriceTracker(t)}))},pusherData:function(){var e=new Pusher("8643c99a8b00ff38c513",{cluster:"eu"}),t=this,a=e.subscribe("weather-channel");a.bind("App\\Events\\WeatherFetchEvent",(function(e){t.liveWeather(e)}));var o=e.subscribe("forecast-channel");o.bind("App\\Events\\ForecastUpdatedEvent",(function(e){t.liveForecast(e)}));var n=e.subscribe("peak-channel");n.bind("App\\Events\\PeakTemperatureEvent",(function(e){t.livePeakForecast(e)}));var s=e.subscribe("price-channel");s.bind("App\\Events\\PriceCheckEvent",(function(e){t.livePriceTracker(e)}))},goHome:function(){"/"!==this.$route.fullPath&&this.$router.push("/")}},computed:{toggleDark:{get:function(){return this.$q.dark.isActive},set:function(e){this.$q.dark.set(e)}}}},m=v,g=(a("83ec"),a("2877")),w=Object(g["a"])(m,n,s,!1,null,null,null);t["default"]=w.exports},"83ec":function(e,t,a){"use strict";a("3802")}}]);